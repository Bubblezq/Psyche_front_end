{"remainingRequest":"D:\\Documents\\GitHub\\Psyche\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\GitHub\\Psyche\\front-end\\src\\views\\counseling\\components\\teacherDetail.vue?vue&type=style&index=0&id=05346db2&lang=less&scoped=true&","dependencies":[{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\src\\views\\counseling\\components\\teacherDetail.vue","mtime":1576085462990},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\node_modules\\css-loader\\index.js","mtime":1573722966629},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1573725517685},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\node_modules\\postcss-loader\\src\\index.js","mtime":1573722998988},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\node_modules\\less-loader\\dist\\cjs.js","mtime":1573723014394},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1573722996621},{"path":"D:\\Documents\\GitHub\\Psyche\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1573725517685}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.detail-layout {\n  margin-left: 44px;\n}\n.text {\n  color: rgba(0, 0, 0, .45);\n}\n\n.heading {\n  color: rgba(0, 0, 0, .85);\n  font-size: 20px;\n}\n\n.no-data {\n  color: rgba(0, 0, 0, .25);\n  text-align: center;\n  line-height: 64px;\n  font-size: 16px;\n\n  i {\n    font-size: 24px;\n    margin-right: 16px;\n    position: relative;\n    top: 3px;\n  }\n}\n\n.photo {\n    align: center;\n}\n\n.mobile {\n  .detail-layout {\n    margin-left: unset;\n  }\n  .text {\n\n  }\n  .status-list {\n    text-align: left;\n  }\n}\n",{"version":3,"sources":["teacherDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgYA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"teacherDetail.vue","sourceRoot":"src/views/counseling/components","sourcesContent":["<template>\n    <page-view title=\"老师详情\">\n    <template>\n    <detail-list :col=\"1\" class=\"detail-layout\">\n      <detail-list-item term=\"老师姓名\">{{this.details.name}}</detail-list-item>\n      <detail-list-item term=\"详细描述\">{{this.details.introduction}}</detail-list-item>\n      <detail-list-item term=\"咨询地址\">{{this.details.address}}</detail-list-item>\n    </detail-list>\n    </template>\n\n    </page-view>\n\n</template>\n\n<script>\nimport { mixinDevice } from '@/utils/mixin'\nimport { PageView } from '@/layouts'\nimport DetailList from '@/components/tools/DetailList'\nimport {getRepairSheetDetail, submitScheduleDetail} from '@/api/sheets'\nimport ACol from \"ant-design-vue/es/grid/Col\";\n  import {mapGetters} from 'vuex'\n\n\n\nconst DetailListItem = DetailList.Item\nconsole.log(\"DetailListItem\",DetailListItem)\n\nconst columns = [{\n  title: '器材/配件',\n  dataIndex: 'statue',\n  width: '25%',\n  filters:[\n    {\n      text:'器材',\n      value:'器材'\n    },{\n      text:'配件',\n      value:'配件',\n    }],\n  onFilter:(value,record) => record.statue.indexOf(value) === 0,\n  scopedSlots: { customRender: 'statue' },\n}, {\n  title: '类型',\n  dataIndex: 'type',\n  width: '25%',\n  scopedSlots: { customRender: 'type' },\n},{\n  title: '型号',\n  dataIndex: 'model',\n  width: '25%',\n  scopedSlots: { customRender: 'model' },\n}, {\n  title: '数量',\n  dataIndex: 'number',\n  width: '25%',\n  scopedSlots: { customRender: 'number' },\n  sorter: (a, b) => a.number > b.number,\n}]\n\nexport default {\n    inject: ['reload'],\n    created(){\n      this.result.DSTid = this.userInfo.id\n\n      this.details = this.$route.params.details\n      this.result.RSTid = this.details.title\n      this.eqID = this.details.eqID\n      console.log(\"this.details.eqID\",this.details.EqId)\n      getRepairSheetDetail().then((response)=>{\n        console.log(\"response\",response.data)\n        this.eqType = response.data.equipType\n        this.acType = response.data.accessory\n        this.stfList = response.data.staff\n        console.log(\"eqType\",this.eqType[0])\n        console.log(\"acType\",this.acType)\n        console.log(\"acType\",this.stfList)\n      })\n\n    },\n    name: 'repairSheetDetail',\n    components: {\n      ACol,\n    PageView,\n\n    DetailList,\n    DetailListItem\n  },\n    mixins: [mixinDevice],\n  data () {\n    return {\n      activeTabKey: '1',\n      rpData:[],\n      columns,\n      eqType:[],\n      acType:[],\n      stfList:[],\n      eqID:'',\n      visible2:true,\n      eqSelected:false,\n      submit:false,\n      result:{\n        'DSTid':'',\n        'RSTid':'',\n        'stfId':'',\n        'ls':[]\n      },\n      eqInfo:'',\n      tempRow:{\n        'type':'',\n        'model':'',\n        'number':'',\n        'statue':'',\n        'key':1\n      },\n      tempKey:1,\n      details: this.$route.params.details,\n      eqNum:'',\n      tempEq:'',\n      tempAc:'',\n      acNum:'',\n      columns,\n      visible:false,\n      info:'',\n    }\n  },\n  filters: {\n    statusFilter (status) {\n      const statusMap = {\n        'agree': '成功',\n        'reject': '驳回'\n      }\n      return statusMap[status]\n    },\n    statusTypeFilter (type) {\n      const statusTypeMap = {\n        'agree': 'success',\n        'reject': 'error'\n      }\n      return statusTypeMap[type]\n    }\n  },\n  computed:{\n    userInfo() {\n        return this.$store.getters.userInfo\n      },\n    qualified:function(){\n      if(this.details.state == '0'||this.details.state=='2'){\n        return \"disabled\"\n      }\n    },\n    qualifiedForEq:function(){\n      console.log(\"eqselected\",this.eqSelected)\n      if(this.details.state == '0'||this.details.state=='2'||this.eqSelected){\n        return \"disabled\"\n      }\n    },\n    successRepair:function(){\n      if(this.result.stfId === ''){\n        return \"error\"\n      }\n      else{\n        return \"success\"\n      }\n    },\n    maxEqNum:function(){\n      if(this.tempEq === ''){\n        return\n      }\n      var tempEqSelect = parseInt(this.tempEq)\n      var tempEqNum = this.eqType[tempEqSelect].number\n      console.log(\"maxNum\",tempEqNum)\n      return tempEqNum\n      //let temp = this.eqType[this.tempEq-'0'].number-'0'\n\n    },\n    maxAcNum:function(){\n      if(this.tempAc === ''){\n        return\n      }\n      var tempAcSelect = parseInt(this.tempAc)\n      var tempAcNum = this.acType[tempAcSelect].number\n      console.log(\"maxNum\",tempAcNum)\n      return tempAcNum\n      //let temp = this.eqType[this.tempEq-'0'].number-'0'\n\n    },\n    compare:function(){\n      if(this.tempEq === ''){\n        return \"success\"\n      }\n      if(!(/(^[1-9]\\d*$)/.test(this.eqNum))){\n        return \"error\"\n      }\n      var tempEqSelect = parseInt(this.tempEq)\n      var tempEqNum = this.eqType[tempEqSelect].number\n      console.log(\"maxNum\",tempEqNum)\n      if(this.eqNum!==''){\n        var inputTemp = parseInt(this.eqNum)\n        console.log(\"input\",inputTemp)\n        if(inputTemp > tempEqNum){\n          return \"error\"\n        }\n        else{\n          return \"success\"\n        }\n      }\n      return \"error\"\n      //let temp = this.eqType[this.tempEq-'0'].number-'0'\n\n    },\n    compareAc:function(){\n      if(this.tempAc === ''){\n        return \"success\"\n      }\n      if (!(/(^[1-9]\\d*$)/.test(this.acNum))){\n        return \"error\"\n      }\n      var tempAcSelect = parseInt(this.tempAc)\n      var tempAcNum = this.acType[tempAcSelect].number\n      console.log(\"maxNum2\",tempAcNum)\n      if(this.acNum!==''){\n        var inputTemp = parseInt(this.acNum)\n        console.log(\"input2\",inputTemp)\n        if(inputTemp > tempAcNum){\n          return \"error\"\n        }\n        else{\n          return \"success\"\n        }\n      }\n      return \"error\"\n      //let temp = this.eqType[this.tempEq-'0'].number-'0'\n\n    },\n    text:function(){\n      if(this.tempEq !== ''){\n        return \"最大数量:\"+this.maxEqNum\n      }\n      else{\n        return \"每次仅允许调度一个器材\"\n      }\n    },\n    textAc:function(){\n      if(this.tempAc !== ''){\n        return \"最大数量:\"+this.maxAcNum\n      }\n      else{\n        return \"请输入数量\"\n      }\n    },\n    qualifiedforButton:function(){\n    if(this.details.state == '0'||this.details.state=='2'||this.eqSelected){\n        return \"disabled\"\n      }\n    if(this.tempEq === ''||this.result.stfId === ''){\n      return \"disabled\"\n    }\n  },\n  qualifiedforButtonAc:function(){\n    if(this.details.state == '0'||this.details.state=='2'){\n        return \"disabled\"\n      }\n    if(this.tempAc === ''||this.acNum === ''||this.result.stfId === ''){\n      return \"disabled\"\n    }\n  },\n  qualifiedforSubmit:function(){\n    console.log(\"length\",this.result.ls.length)\n    if(this.result.ls.length === 0||this.submit){\n        return \"disabled\"\n      }\n  },\n  },\n  methods:{\n    handleOK(){\n\n      this.visible = false\n      this.result.stfId = \"ST\"+this.result.stfId\n      console.log(\"this.result.stfId\",this.result.stfId)\n      submitScheduleDetail(this.result).then((response) =>{\n        this.info = response.info\n        if(this.info === 'ok'){\n          this.submit = true\n          this.details.state = '2'\n          this.$notification.open({\n          message: '调度成功',\n          description: '本条报修单调度成功',\n          icon: <a-icon type=\"check\" style=\"color: #108ee9\" />,\n        });\n        }\n      })\n    },\n    onClickSubmit(){\n      this.visible = true\n    },\n    handleStaffChange(value){\n      this.result.stfId = value\n      console.log(\"newId\",this.result.stfId)\n    },\n    handleEqChange(value){\n      this.tempEq = value\n      console.log(\"newEq\",this.tempEq)\n    },\n    handleAcChange(value){\n      this.tempAc = value\n      console.log(\"newAc\",this.tempAc)\n    },\n    handleAddEq(){\n      this.eqNum = '1'\n      var tempEqSelect = parseInt(this.tempEq)\n      var tempEqNum = this.eqType[tempEqSelect].number\n      console.log(\"容量\",tempEqNum)\n      var inputTemp = parseInt(this.eqNum)\n      console.log(\"需求\",inputTemp)\n      if(inputTemp > tempEqNum){\n        this.$notification.open({\n          message: '添加失败',\n          description: '仓储不足，请先补充仓储器材',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />,\n        });\n        return;\n      }\n      else{\n          this.eqSelected = true\n          console.log(\"rowls\",this.result.ls)\n          this.tempKey = this.tempKey + 1\n          console.log(\"tempKey\",this.tempKey)\n          this.result.ls.push({\n            'type': this.eqType[tempEqSelect].type,\n            'model': this.eqType[tempEqSelect].model,\n            'number': inputTemp,\n            'statue':'器材',\n            'key' : this.tempKey+1\n          })\n          this.eqNum = ''\n          this.eqType[tempEqSelect].number = String(this.eqType[tempEqSelect].number-parseInt(inputTemp))\n          console.log(\"eqNumber\",this.eqType.number )\n      }\n    },\n    handleAddAc(){\n      if(!(/(^[1-9]\\d*$)/.test(this.acNum))){\n        this.$notification.open({\n          message: '添加失败',\n          description: '请输入合法的数字字符',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />,\n        });\n        return;\n      }\n      var tempAcSelect = parseInt(this.tempAc)\n      var tempAcNum = this.acType[tempAcSelect].number\n      console.log(\"容量2\",tempAcNum)\n      var inputTemp = parseInt(this.acNum)\n      console.log(\"需求2\",inputTemp)\n      if(inputTemp > tempAcNum){\n        this.$notification.open({\n          message: '添加失败',\n          description: '仓储不足，请先补充仓储配件',\n          icon: <a-icon type=\"exclamation-circle\" style=\"color: #108ee9\" />,\n        });\n        return;\n      }\n      else{\n        console.log(\"rowls\",this.result.ls)\n           this.tempRow.key = this.tempKey+1\n          this.tempKey = this.tempKey + 1\n          console.log(\"tempKey\",this.tempKey)\n          this.result.ls.push({\n            'type': this.acType[tempAcSelect].type,\n            'model': this.acType[tempAcSelect].model,\n            'number':inputTemp,\n            'statue':'配件',\n            'key' : this.tempKey+1\n          })\n          this.acNum = ''\n          this.acType[tempAcSelect].number = String(this.acType[tempAcSelect].number-parseInt(inputTemp))\n      }\n    }\n},\n}\n\n</script>\n\n<style lang=\"less\" scoped>\n\n  .detail-layout {\n    margin-left: 44px;\n  }\n  .text {\n    color: rgba(0, 0, 0, .45);\n  }\n\n  .heading {\n    color: rgba(0, 0, 0, .85);\n    font-size: 20px;\n  }\n\n  .no-data {\n    color: rgba(0, 0, 0, .25);\n    text-align: center;\n    line-height: 64px;\n    font-size: 16px;\n\n    i {\n      font-size: 24px;\n      margin-right: 16px;\n      position: relative;\n      top: 3px;\n    }\n  }\n\n  .photo {\n      align: center;\n  }\n\n  .mobile {\n    .detail-layout {\n      margin-left: unset;\n    }\n    .text {\n\n    }\n    .status-list {\n      text-align: left;\n    }\n  }\n</style>"]}]}